'''
NetPyNE simulator compliant export for:

Components:
    null (Type: notes)
    Syn_AMPA_SupPyr_SupFS (Type: alphaSynapse:  tau=8.0E-4 (SI time) gbase=8.829106588110001E-10 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    Syn_AMPA_SupPyr_SupLTS (Type: alphaSynapse:  tau=0.001 (SI time) gbase=7.35758882343E-10 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    Syn_AMPA_SupPyr_SupPyr (Type: alphaSynapse:  tau=0.002 (SI time) gbase=1.83939720586E-10 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupAxAx_SupPyr (Type: expOneSynapse:  tauDecay=0.006 (SI time) gbase=1.2E-9 (SI conductance) erev=-0.081 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupBask_SupAxAx (Type: expOneSynapse:  tauDecay=0.003 (SI time) gbase=2.0E-10 (SI conductance) erev=-0.075 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupBask_SupBask (Type: expOneSynapse:  tauDecay=0.003 (SI time) gbase=2.0E-10 (SI conductance) erev=-0.075 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupBask_SupLTS (Type: expOneSynapse:  tauDecay=0.003 (SI time) gbase=5.0E-10 (SI conductance) erev=-0.075 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupBask_SupPyr (Type: expOneSynapse:  tauDecay=0.006 (SI time) gbase=1.2E-9 (SI conductance) erev=-0.081 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupLTS_FS (Type: expOneSynapse:  tauDecay=0.02 (SI time) gbase=1.0000000000000001E-11 (SI conductance) erev=-0.075 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupLTS_LTS (Type: expOneSynapse:  tauDecay=0.02 (SI time) gbase=5.0E-11 (SI conductance) erev=-0.075 (SI voltage))
    null (Type: notes)
    Syn_GABAA_SupLTS_SupPyr (Type: expOneSynapse:  tauDecay=0.02 (SI time) gbase=1.0000000000000001E-11 (SI conductance) erev=-0.081 (SI voltage))
    null (Type: notes)
    Syn_NMDA_RSPyr_SupFS (Type: blockingPlasticSynapse:  tauRise=0.001 (SI time) tauDecay=0.1 (SI time) peakTime=0.004651687056553628 (SI time) waveformFactor=1.0581977300905705 (dimensionless) gbase=1.5E-10 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    Syn_NMDA_RSPyr_SupLTS (Type: blockingPlasticSynapse:  tauRise=0.001 (SI time) tauDecay=0.1 (SI time) peakTime=0.004651687056553628 (SI time) waveformFactor=1.0581977300905705 (dimensionless) gbase=1.5E-10 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    Syn_NMDA_SupPyr_SupPyr (Type: blockingPlasticSynapse:  tauRise=0.001 (SI time) tauDecay=0.13 (SI time) peakTime=0.0049052672756529124 (SI time) waveformFactor=1.0465037761841465 (dimensionless) gbase=2.5E-11 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    SynForEctStim (Type: expTwoSynapse:  tauRise=1.0E-4 (SI time) tauDecay=2.0E-4 (SI time) peakTime=1.3862943611198905E-4 (SI time) waveformFactor=4.0 (dimensionless) gbase=1.0E-8 (SI conductance) erev=0.0 (SI voltage))
    null (Type: notes)
    ar__m00_25 (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    cad__beta0_02__phi260000 (Type: fixedFactorConcentrationModelTraub:  restingConc=0.0 (SI concentration) beta=20.0 (SI per_time) phi=2.6E16 (SI rho_factor))
    null (Type: notes)
    cad__beta0_05__phi520000 (Type: fixedFactorConcentrationModelTraub:  restingConc=0.0 (SI concentration) beta=50.0 (SI per_time) phi=5.2E16 (SI rho_factor))
    null (Type: notes)
    cal (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    cat_a (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    k2 (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    ka (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    kahp_slower (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    kc_fast (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    kdr_fs (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    km (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    naf2__a0__b0__c0__d0__fastNa_shiftmin2_5 (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    nap (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    pas (Type: ionChannelPassive:  conductance=1.0E-11 (SI conductance))
    SupLTSInter (Type: cell)
    null (Type: notes)
    cat (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    SupAxAx (Type: cell)
    SupBasket (Type: cell)
    null (Type: notes)
    cad__beta0_01__phi26000 (Type: fixedFactorConcentrationModelTraub:  restingConc=0.0 (SI concentration) beta=10.0 (SI per_time) phi=2.6E15 (SI rho_factor))
    null (Type: notes)
    cad__beta0_05__phi52000 (Type: fixedFactorConcentrationModelTraub:  restingConc=0.0 (SI concentration) beta=50.0 (SI per_time) phi=5.2E15 (SI rho_factor))
    null (Type: notes)
    kahp (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    kc (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    kdr (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    null (Type: notes)
    naf__a0__b0__c0__d0__fastNa_shiftmin3_5 (Type: ionChannelHH:  conductance=1.0E-11 (SI conductance))
    L23PyrRS (Type: cell)
    null (Type: notes)
    null (Type: property)
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell7 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=7.799999999999999E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell2 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=8.5E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell1 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=9.399999999999999E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell4 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=7.799999999999999E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell6 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=9.299999999999999E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell5 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=6.8E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell3 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=9.7E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell0 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=7.699999999999999E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell8 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=6.6E-11 (SI current))
    DepCurr_L23RS_TO_CG3D_L23PyrRS_Pulse0_Cell9 (Type: pulseGenerator:  delay=0.0 (SI time) duration=20.0 (SI time) amplitude=8.5E-11 (SI current))
    BackgroundL23RS_TO_CG3D_L23PyrRS_PoiSyn0 (Type: poissonFiringSynapse:  averageRate=100.0 (SI per_time) averageIsi=0.01 (SI time))
    EctopicStimL23RS_TO_CG3D_L23PyrRS_PoiSyn0 (Type: poissonFiringSynapse:  averageRate=0.1 (SI per_time) averageIsi=10.0 (SI time))
    TestL23 (Type: networkWithTemperature:  temperature=305.15 (SI temperature))
    Sim_TestL23 (Type: Simulation:  length=0.1 (SI time) step=2.5E-5 (SI time))


    This NetPyNE file has been generated by org.neuroml.export (see https://github.com/NeuroML/org.neuroml.export)
         org.neuroml.export  v1.5.0
         org.neuroml.model   v1.5.0
         jLEMS               v0.9.8.7

'''
# Main NetPyNE script for: TestL23

# See https://github.com/Neurosim-lab/netpyne

from netpyne import specs  # import netpyne specs module
from netpyne import sim    # import netpyne sim module

from neuron import h


###############################################################################
# NETWORK PARAMETERS
###############################################################################

nml2_file_name = 'TestL23.net.nml'

###############################################################################
# SIMULATION PARAMETERS
###############################################################################

simConfig = specs.SimConfig()   # object of class SimConfig to store the simulation configuration

# Simulation parameters
simConfig.duration = simConfig.tstop = 100.0 # Duration of the simulation, in ms
simConfig.dt = 0.024999999 # Internal integration timestep to use
simConfig.randseed = 1 # Random seed to use
simConfig.createNEURONObj = 1  # create HOC objects when instantiating network
simConfig.createPyStruct = 1  # create Python structure (simulator-independent) when instantiating network
simConfig.verbose = False  # show detailed messages 
simConfig.hParams['celsius'] = (305.15 - 273.15)

# Recording 
simConfig.recordCells = ['all']  
simConfig.recordTraces = {}

# For saving to file: Sim_TestL23.CG3D_L23PyrRS.v.dat (ref: Volts_file__CG3D_L23PyrRS)
# Column: v_CG3D_L23PyrRS_0_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 0; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_0_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':0}}
# Column: v_CG3D_L23PyrRS_1_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 1; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_1_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':1}}
# Column: v_CG3D_L23PyrRS_2_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 2; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_2_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':2}}
# Column: v_CG3D_L23PyrRS_3_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 3; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_3_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':3}}
# Column: v_CG3D_L23PyrRS_4_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 4; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_4_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':4}}
# Column: v_CG3D_L23PyrRS_5_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 5; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_5_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':5}}
# Column: v_CG3D_L23PyrRS_6_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 6; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_6_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':6}}
# Column: v_CG3D_L23PyrRS_7_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 7; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_7_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':7}}
# Column: v_CG3D_L23PyrRS_8_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 8; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_8_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':8}}
# Column: v_CG3D_L23PyrRS_9_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 9; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_9_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_L23PyrRS','cellLabel':9}}
# For saving to file: Sim_TestL23.CG3D_SupAxAx.v.dat (ref: Volts_file__CG3D_SupAxAx)
# Column: v_CG3D_SupAxAx_0_SupAxAx_v: Pop: CG3D_SupAxAx; cell: 0; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_SupAxAx_CG3D_SupAxAx_0_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_SupAxAx','cellLabel':0}}
# For saving to file: Sim_TestL23.CG3D_SupLTS.v.dat (ref: Volts_file__CG3D_SupLTS)
# Column: v_CG3D_SupLTS_0_SupLTSInter_v: Pop: CG3D_SupLTS; cell: 0; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_SupLTS_CG3D_SupLTS_0_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_SupLTS','cellLabel':0}}
# For saving to file: Sim_TestL23.CG3D_SupBask.v.dat (ref: Volts_file__CG3D_SupBask)
# Column: v_CG3D_SupBask_0_SupBasket_v: Pop: CG3D_SupBask; cell: 0; segment id: 0; segment name: Seg0_comp_1; Neuron loc: comp_1(0.25); value: v (v)
simConfig.recordTraces['Volts_file__CG3D_SupBask_CG3D_SupBask_0_Seg0_comp_1_v'] = {'sec':'comp_1','loc':0.25,'var':'v','conds':{'popLabel':'CG3D_SupBask','cellLabel':0}}


simConfig.plotCells = ['all']


simConfig.recordStim = True  # record spikes of cell stims
simConfig.recordStep = simConfig.dt # Step size in ms to save data (eg. V traces, LFP, etc)



# Analysis and plotting 
simConfig.plotRaster = True # Whether or not to plot a raster
simConfig.plotLFPSpectrum = False # plot power spectral density
simConfig.maxspikestoplot = 3e8 # Maximum number of spikes to plot
simConfig.plotConn = False # whether to plot conn matrix
simConfig.plotWeightChanges = False # whether to plot weight changes (shown in conn matrix)
#simConfig.plot3dArch = True # plot 3d architecture

# Saving
simConfig.filename = 'TestL23.txt'  # Set file output name
simConfig.saveFileStep = simConfig.dt # step size in ms to save data to disk
# simConfig.saveDat = True # save to dat file


###############################################################################
# IMPORT & RUN
###############################################################################

print("Running a NetPyNE based simulation for %sms (dt: %sms) at %s degC"%(simConfig.duration, simConfig.dt, h.celsius))

gids = sim.importNeuroML2SimulateAnalyze(nml2_file_name,simConfig)

print("Finished simulation")


###############################################################################
#   Saving data (this ensures the data gets saved in the format/files 
#   as specified in the LEMS <Simulation> element)
###############################################################################


if sim.rank==0: 
    print("Saving to file: Sim_TestL23.CG3D_L23PyrRS.v.dat (ref: Volts_file__CG3D_L23PyrRS)")

 
    # Column: t
    col_Volts_file__CG3D_L23PyrRS_t = [i*simConfig.dt for i in range(int(simConfig.duration/simConfig.dt))]

    # Column: v_CG3D_L23PyrRS_0_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 0; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_0_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_0_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][0]]

    # Column: v_CG3D_L23PyrRS_1_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 1; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_1_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_1_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][1]]

    # Column: v_CG3D_L23PyrRS_2_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 2; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_2_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_2_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][2]]

    # Column: v_CG3D_L23PyrRS_3_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 3; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_3_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_3_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][3]]

    # Column: v_CG3D_L23PyrRS_4_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 4; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_4_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_4_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][4]]

    # Column: v_CG3D_L23PyrRS_5_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 5; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_5_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_5_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][5]]

    # Column: v_CG3D_L23PyrRS_6_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 6; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_6_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_6_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][6]]

    # Column: v_CG3D_L23PyrRS_7_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 7; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_7_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_7_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][7]]

    # Column: v_CG3D_L23PyrRS_8_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 8; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_8_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_8_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][8]]

    # Column: v_CG3D_L23PyrRS_9_L23PyrRS_v: Pop: CG3D_L23PyrRS; cell: 9; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_9_L23PyrRS_v = sim.allSimData['Volts_file__CG3D_L23PyrRS_CG3D_L23PyrRS_9_Seg0_comp_1_v']['cell_%s'%gids['CG3D_L23PyrRS'][9]]

    dat_file_Volts_file__CG3D_L23PyrRS = open('Sim_TestL23.CG3D_L23PyrRS.v.dat', 'w')
    for i in range(len(col_Volts_file__CG3D_L23PyrRS_t)):
        dat_file_Volts_file__CG3D_L23PyrRS.write( '%s\t'%(col_Volts_file__CG3D_L23PyrRS_t[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_0_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_1_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_2_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_3_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_4_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_5_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_6_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_7_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_8_L23PyrRS_v[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_L23PyrRS_v_CG3D_L23PyrRS_9_L23PyrRS_v[i]/1000.0) +  '\n')
    dat_file_Volts_file__CG3D_L23PyrRS.close()

    print("Saving to file: Sim_TestL23.CG3D_SupAxAx.v.dat (ref: Volts_file__CG3D_SupAxAx)")

 
    # Column: t
    col_Volts_file__CG3D_SupAxAx_t = [i*simConfig.dt for i in range(int(simConfig.duration/simConfig.dt))]

    # Column: v_CG3D_SupAxAx_0_SupAxAx_v: Pop: CG3D_SupAxAx; cell: 0; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_SupAxAx_v_CG3D_SupAxAx_0_SupAxAx_v = sim.allSimData['Volts_file__CG3D_SupAxAx_CG3D_SupAxAx_0_Seg0_comp_1_v']['cell_%s'%gids['CG3D_SupAxAx'][0]]

    dat_file_Volts_file__CG3D_SupAxAx = open('Sim_TestL23.CG3D_SupAxAx.v.dat', 'w')
    for i in range(len(col_Volts_file__CG3D_SupAxAx_t)):
        dat_file_Volts_file__CG3D_SupAxAx.write( '%s\t'%(col_Volts_file__CG3D_SupAxAx_t[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_SupAxAx_v_CG3D_SupAxAx_0_SupAxAx_v[i]/1000.0) +  '\n')
    dat_file_Volts_file__CG3D_SupAxAx.close()

    print("Saving to file: Sim_TestL23.CG3D_SupLTS.v.dat (ref: Volts_file__CG3D_SupLTS)")

 
    # Column: t
    col_Volts_file__CG3D_SupLTS_t = [i*simConfig.dt for i in range(int(simConfig.duration/simConfig.dt))]

    # Column: v_CG3D_SupLTS_0_SupLTSInter_v: Pop: CG3D_SupLTS; cell: 0; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_SupLTS_v_CG3D_SupLTS_0_SupLTSInter_v = sim.allSimData['Volts_file__CG3D_SupLTS_CG3D_SupLTS_0_Seg0_comp_1_v']['cell_%s'%gids['CG3D_SupLTS'][0]]

    dat_file_Volts_file__CG3D_SupLTS = open('Sim_TestL23.CG3D_SupLTS.v.dat', 'w')
    for i in range(len(col_Volts_file__CG3D_SupLTS_t)):
        dat_file_Volts_file__CG3D_SupLTS.write( '%s\t'%(col_Volts_file__CG3D_SupLTS_t[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_SupLTS_v_CG3D_SupLTS_0_SupLTSInter_v[i]/1000.0) +  '\n')
    dat_file_Volts_file__CG3D_SupLTS.close()

    print("Saving to file: Sim_TestL23.CG3D_SupBask.v.dat (ref: Volts_file__CG3D_SupBask)")

 
    # Column: t
    col_Volts_file__CG3D_SupBask_t = [i*simConfig.dt for i in range(int(simConfig.duration/simConfig.dt))]

    # Column: v_CG3D_SupBask_0_SupBasket_v: Pop: CG3D_SupBask; cell: 0; segment id: 0; segment name: Seg0_comp_1; value: v
    col_Volts_file__CG3D_SupBask_v_CG3D_SupBask_0_SupBasket_v = sim.allSimData['Volts_file__CG3D_SupBask_CG3D_SupBask_0_Seg0_comp_1_v']['cell_%s'%gids['CG3D_SupBask'][0]]

    dat_file_Volts_file__CG3D_SupBask = open('Sim_TestL23.CG3D_SupBask.v.dat', 'w')
    for i in range(len(col_Volts_file__CG3D_SupBask_t)):
        dat_file_Volts_file__CG3D_SupBask.write( '%s\t'%(col_Volts_file__CG3D_SupBask_t[i]/1000.0) +  '%s\t'%(col_Volts_file__CG3D_SupBask_v_CG3D_SupBask_0_SupBasket_v[i]/1000.0) +  '\n')
    dat_file_Volts_file__CG3D_SupBask.close()


    print("Saved all data.")
